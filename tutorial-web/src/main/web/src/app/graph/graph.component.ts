import * as d3 from 'd3';
import { Component, ViewEncapsulation } from '@angular/core';
import { ZprimeService } from './ZprimeService';
import { MainGraph } from './graphD3/main-graph';

@Component({
    selector: 'graph-comp',
    templateUrl: './graph.component.html',
    encapsulation: ViewEncapsulation.None,
    styleUrls: ['./graph.component.css']
})
export class Graph {

    ngOnInit() {
        // fetch('/ws/monitors').then((response) => {return response.json();}).then((data)=> {
        //     console.log(data);
        // });
        var data = [
            [7.04724001002674, 6.61475269982607],
            [469.966494833577, 0.0564702199413471],
            [730.847237320262, 0.0215223094667359],
            [905.866531022960, 0.0144661295207866],
            [1039.02689299484, 0.00931883809850469],
            [1283.62719582864, 0.00635253741779030],
            [1381.46335692502, 0.00501137608676594],
            [1464.63016304429, 0.00465843115289524],
            [1619.54107684353, 0.00345799854937132],
            [1854.89727558436, 0.00221381244720744],
            [2028.29945846779, 0.00198801193219451],
            [2233.76875950421, 0.00160342968533543],
            [2822.45802872374, 0.000930996827220198],
            [2881.70898444618, 0.000910414017692678],
            [3051.84671932062, 0.000769350625256198],
            [3146.97465501620, 0.000746237104002209],
            [3307.87000755296, 0.000614227804738634],
            [3426.37134507942, 0.000580272568532539],
            [3747.08700528734, 0.000508480886790707],
            [4033.01469573609, 0.000466843569031935],
            [4991.91788941422, 0.000457874894929627]
          ];
          // Reference model getted from image
          var dataRef = [
            [214, 7.74515302348704],
            [422, 2.06670819007132],
            [637, 0.759514797439999],
            [850, 0.329563765307096],
            [1061, 0.157606621702001],
            [1275, 0.0822319227166973],
            [1489, 0.0453169751352594],
            [1700, 0.0264312842459514],
            [1915, 0.0157315491239002],
            [2125, 0.00959368355537086],
            [2340, 0.00606782606658235],
            [2553, 0.00389261104625838],
            [2766, 0.00254312064642874],
            [2978, 0.00167838881005014],
            [3191, 0.00112123466115219],
            [3403, 0.000770581808809941],
            [3617, 0.000526380530382762],
            [3829, 0.000367672027921608],
            [4043, 0.000256814729469311],
            [4253, 0.000184543483047888],
            [4468, 0.000133148057754045]
          ];
          // Observed model getted from image
          var dataObserved = [
            [7.05670966406125, 8.08379869461361],
            [7.04724001002674, 6.61475269982607],
            [99.9161371264827, 1.06814273110627],
            [207.535311718150, 0.812451011183475],
            [315.058928891832, 0.0816634920543581],
            [422.681546994057, 0.0668142736288953],
            [530.294695442248, 0.0447310072600225],
            [633.034415573223, 0.0447254215391931],
            [738.467247919771, 0.0264086600480022],
            [846.059065733116, 0.0112534740341184],
            [955.841147567494, 0.00671236131535110],
            [1058.58431120903, 0.00721929021255946],
            [1166.74717785657, 0.00550227034306237],
            [1273.83040829112, 0.00492147702120296],
            [1382.54241921959, 0.00421863529493488],
            [1489.08520980267, 0.00403422173588066],
            [1591.82052989238, 0.00367480205103872],
            [1697.81455880681, 0.00315000980080376],
            [1802.17598110446, 0.00259820969426234],
            [2016.87685568154, 0.00171127008625540],
            [2234.31082545788, 0.00155228893437709],
            [2443.58444043633, 0.00122937147873451],
            [2653.41571281903, 0.00131137382042053],
            [2868.13026578526, 0.00115394389224072],
            [3401.90185470731, 0.000493468684786436],
            [3930.26722770636, 0.000396241941684986],
            [4468.42508385474, 0.000374905054734916],
            [4995.17238950382, 0.000394129240239056]
          ];
          var dataSsm001 = [
            [8.59165449529164, 1.06178857435021],
            [99.3760798873023, 1.15128488626385],
            [222.230493024433, 1.19144730357768],
            [315.186338782478, 1.21323273909261],
            [413.033691288169, 1.21308845227264],
            [566.327398615062, 1.20063904156244],
            [662.543579300040, 1.19080980458061],
            [757.127440327453, 1.14339458712534],
            [795.178423299542, 1.12496111020824],
            [886.500992869312, 1.08675691414999],
            [1044.13964529584, 0.991876112300337],
            [1174.05555075058, 0.918239146783523],
            [1471.38986992273, 0.698270266164395],
            [2138.88550436439, 0.294353459014719],
            [2841.70227878329, 0.0949642731795702],
            [3536.36453324161, 0.0302675143064834],
            [4327.23866399672, 0.00873436711509305],
            [4986.57853498789, 0.00354294832982600]
          ];
          var dataSsm0002 = [
            [7.35227765362328, 0.0422911853669169],
            [92.7004520583269, 0.0455782905395418],
            [186.200850749892, 0.0473614726175304],
            [283.505276424271, 0.0480322079110225],
            [377.004718585126, 0.0489104373218941],
            [475.939168243364, 0.0488055827214477],
            [572.699614902649, 0.0490973299440967],
            [664.023141003129, 0.0484006224406146],
            [755.347049715894, 0.0481020169254173],
            [853.193541343945, 0.0472273178425408],
            [951.040032971996, 0.0463685245061274],
            [1083.67478131843, 0.0437158137398881],
            [1427.22110783206, 0.0379970464081949],
            [1992.00275281886, 0.0276261539663936],
            [2643.75283958098, 0.0173228149410967],
            [3113.94488435611, 0.0116157246209434],
            [3578.15622086348, 0.00760185361320799],
            [3945.06657520703, 0.00527665565983102],
            [4126.61916496897, 0.00439621966472274],
            [4403.84032158409, 0.00333639860164256],
            [4989.81065225887, 0.00189836394573680]
          ];

        let ssmData = [{
          data: dataSsm001,
          render: true,
          legend: {
              text: 'ssm 0.01:'
          },
          text: {
              text: '001',
              x: 170,
              y: 140
          }
      },
      {
          data: dataSsm0002,
          render: true,
          legend: {
              text: 'ssm 0.002:'
          },
          text: {
              text: '0002',
              x: 270,
              y: 140
          }
      }];

        let main: MainGraph = new MainGraph("div#svg");
        main.init(dataRef);
        main.addLineToContainer(ssmData[0]);
        main.addLineToContainer(ssmData[1]);
    }
}

